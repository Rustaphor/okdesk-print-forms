Проект печатные формы для системы OKDESK
========================================
Печатные формы представляют собой фрагменты HTML-кода с помощью которых далее система [OKDESK](https://okdesk.ru/) формирует документы для вывода на печать (принтер). В этом проекта содержатся исходные коды печатных форм, которые удобно изменять и добавлять новые.

> Настоящие печатные формы являются собственностью компании ООО "МСП".

_Разработано Владимиром Иншаковым <v.inshakov@medserv.pro>, октябрь 2024_

## Исходные файлы
Проект состоит из различных файлов, включая служебные. Ниже описание основных (важных) файлов. Все исходные файлы печатных форм находятся в директории `<src-form>\*.pug`, написаны на языке (формате) [PUG](https://pugjs.org/), удобном для анализа, модификации, расширении.

Остальные файлы служебные и используются разработчиком (не описано).

> Исходные файлы в первоначальном виде непригодны для прямого изпользования OKDESK. Их требуется откомпиллировать. Инструкция по этому см. ниже.

## 1. Как пользоваться проектом
Ниже пожагово описано как настроить специальную среду компилляции данных исходников и затем вручную перенести в OKDESK.

### 1.1. Настройка среды компилляции
Сперва необходимо установить специальные приложения:

- [NodeJs+NPM](https://nodejs.org/), которое скачивается бесплатно.
- **Git** для командной строки. Для **Windows**, например, подойдет [git for Windows](https://gitforwindows.org/)

Далее необходимо перейти в командную строку или *PowerShell* и работь в терминале.
Скачайте данный проект в любую удобную локальную директорию на компьютере, например командой ниже:
```
git clone https://github.com/Rustaphor/okdesk-print-forms.git && cd okdesk-print-forms
```

> **ПРИМЕЧАНИЕ:**  Все нижеследующие команды выполняются строго в корневой директории проекта.

Далее необходимо установить все необходимые компоненты для компиляции, для этого выполните команду ниже:
```
npm install
```

Среда готова к работе, можно приступать к компиляции файлов.

### 1.2. Компиляция
Самое простое - запустить все по-умолчанию всего одной командой ниже
```
npm run build
```
> Данная команда (без параметров) сначала удаляет все лишние временные файлы, после производит компиляци.

Файлы, готовые для OKDESK появятся в папке `output/*.html.txt`. Имя файла соответствует имени формы.

### 1.2. Перенос финальных файлов в OKDESK
Сгенерированные файлы для OKDESK будут находится в директории `dist/*.html.txt`. Файлы представляют собой фрагменты HTML-кода в компактном формате. Содержимое этих файлом требуется вручную скопипастить в соответствующую форму системы OKDESK. Больше ничего не требуется.

## 2. Просмотр печатных форм локально
Печатные формы также можно посмотреть локально, не загружая в систему OKDESK. Для этого можно выполнить нижеследующее.

### 2.1. Генерация тестовых файлов
Проект содержит папку `test`, в которой шаблоны для тестирования проекта. Для начала тестирования печатных форм требуется выполнить следующие две команды:
```
npm test
npm run webserver
```
Последней команды запустится стандартный веб-браузер на локальном сервере `http://localhost:8080` на страничке будет список файлов всех имеющихся форм проекта. Достаточно кликнуть по нужному файлу для просмотра печатной формы.

> **ПРИМЕЧАНИЕ:** Локальный веб-сервер можно выгрузить нажатием сочетаний клавиш **Ctrl+C**. 
